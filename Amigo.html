<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Amigo Secreto</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f2f5;
            padding: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        .personaje {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: #fff;
            margin: 10px 0;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0px 2px 6px rgba(0,0,0,0.1);
        }
        button {
            background: #4CAF50;
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background: #45a049;
        }
        #nota {
            margin-top: 20px;
            font-weight: bold;
        }
        #descargar {
            margin-top: 20px;
        }
    </style>
</head>
<body>

<h1>Amigo Secreto</h1>

<div id="personajes-container"></div>

<div id="nota">Nota: Regalo mínimo $50 y recordar la actividad familiar (mínimo un juego con sus respectivos elementos).</div>

<button id="descargar">Descargar Resultados</button>

<script>
    // Lista de personajes
    const personajes = [
        "Ironman",
        "Thor",
        "Hulk",
        "Viuda Negra",
        "Bruja Escarlata",
        "Capitana Marvel"
    ];

    const container = document.getElementById('personajes-container');

    // Cargar resultados previos desde localStorage
    let resultados = JSON.parse(localStorage.getItem('resultadosAmigoSecreto')) || {};

    // Mostrar personajes
    personajes.forEach(personaje => {
        const div = document.createElement('div');
        div.classList.add('personaje');

        const name = document.createElement('span');
        name.textContent = personaje;

        const input = document.createElement('input');
        input.type = 'text';
        input.placeholder = 'Nombre de tu amigo secreto';
        input.value = resultados[personaje] || '';

        // Guardar cambios en localStorage
        input.addEventListener('input', () => {
            resultados[personaje] = input.value;
            localStorage.setItem('resultadosAmigoSecreto', JSON.stringify(resultados));
        });

        div.appendChild(name);
        div.appendChild(input);
        container.appendChild(div);
    });

    // Descargar resultados como CSV
    document.getElementById('descargar').addEventListener('click', () => {
        let csv = "Personaje,Amigo Secreto\n";
        for (let p of personajes) {
            const amigo = resultados[p] || '';
            csv += `"${p}","${amigo}"\n`;
        }

        const blob = new Blob([csv], { type: 'text/csv' });
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'resultados_amigo_secreto.csv';
        a.click();
        URL.revokeObjectURL(url);
    });
</script>

</body>
</html>
